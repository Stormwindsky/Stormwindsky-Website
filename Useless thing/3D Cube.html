<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Cube ■</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #111; font-family: 'Inter', sans-serif; }
        canvas { display: block; }

        /* Interface utilisateur au-dessus du canvas */
        #ui-container {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            background: rgba(0, 0, 0, 0.7);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid #333;
            max-width: 300px;
            pointer-events: auto;
        }

        .control-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-size: 0.9rem; font-weight: 600; }
        
        select, input[type="color"] {
            width: 100%;
            padding: 8px;
            border-radius: 8px;
            border: none;
            background: #2d333b;
            color: white;
            cursor: pointer;
        }

        h2 { margin: 0 0 10px 0; font-size: 1.2rem; }
        p { font-size: 0.85rem; opacity: 0.8; line-height: 1.4; }
    </style>
</head>
<body>

    <div id="ui-container">
        <div class="control-group">
            <label for="langSelect">Language / Langue</label>
            <select id="langSelect" onchange="changeLanguage(this.value)">
                <option value="en">English</option>
                <option value="fr-FR">Français (France)</option>
                <option value="fr-CA">Français (Québec)</option>
                <option value="es-ES">Español (España)</option>
            </select>
        </div>

        <h2 id="txt-title">3D Cube Studio</h2>
        <p id="txt-desc">Adjust the color and explore the 3D space with your mouse.</p>

        <div class="control-group" style="margin-top: 20px;">
            <label id="txt-color-label" for="colorPicker">Cube Color</label>
            <input type="color" id="colorPicker" value="#00ff88">
        </div>
    </div>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

        // --- TRADUCTIONS (Inspirées de Welcome(3).html) ---
        const translations = {
            'en': {
                title: "3D Cube Studio",
                desc: "Adjust the color and explore the 3D space with your mouse.",
                colorLabel: "Cube Color"
            },
            'fr-FR': {
                title: "Studio Cube 3D",
                desc: "Ajustez la couleur et explorez l'espace 3D avec votre souris.",
                colorLabel: "Couleur du Cube"
            },
            'fr-CA': {
                title: "Studio Cube 3D",
                desc: "Modifie la couleur et gosse dans l'espace 3D avec ta souris.",
                colorLabel: "Couleur du Cube"
            },
            'es-ES': {
                title: "Estudio Cubo 3D",
                desc: "Ajusta el color y explora el espacio 3D con tu ratón.",
                colorLabel: "Color del Cubo"
            }
        };

        window.changeLanguage = function(lang) {
            const t = translations[lang];
            document.getElementById('txt-title').innerText = t.title;
            document.getElementById('txt-desc').innerText = t.desc;
            document.getElementById('txt-color-label').innerText = t.colorLabel;
            document.documentElement.lang = lang;
            localStorage.setItem('preferredLang', lang);
        };

        // --- LOGIQUE THREE.JS ---
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x0a0a0a);

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 5;

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Création du cube
        const geometry = new THREE.BoxGeometry(2, 2, 2);
        const material = new THREE.MeshStandardMaterial({ color: 0x00ff88, metalness: 0.5, roughness: 0.2 });
        const cube = new THREE.Mesh(geometry, material);
        scene.add(cube);

        // Lumières
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
        scene.add(ambientLight);
        const pointLight = new THREE.PointLight(0xffffff, 100);
        pointLight.position.set(5, 5, 5);
        scene.add(pointLight);

        const controls = new OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;

        // Changement de couleur dynamique
        const colorPicker = document.getElementById('colorPicker');
        colorPicker.addEventListener('input', (e) => {
            cube.material.color.set(e.target.value);
        });

        function animate() {
            requestAnimationFrame(animate);
            cube.rotation.x += 0.005;
            cube.rotation.y += 0.005;
            controls.update();
            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // Initialisation langue au chargement
        window.onload = () => {
            const savedLang = localStorage.getItem('preferredLang') || 'en';
            document.getElementById('langSelect').value = savedLang;
            changeLanguage(savedLang);
        };

        animate();
    </script>
</body>
</html>